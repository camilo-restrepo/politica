'use strict';

boardModule.controller('mapController', mapController);
mapController.$inject = ['$scope', 'tweetsService', '$state', '$stateParams'];

function mapController($scope, $state, $stateParams) {

	$scope.changeMessageBoxState = function() {
    	$scope.boxIsFull = !$scope.boxIsFull;
    	$scope.showOrHide = $scope.boxIsFull ? 'Ocultar' : "Mostrar";
  	};

	$scope.init = function(){
		$scope.cityId = $stateParams.cityId;
		$scope.boxIsFull = true;
      	$scope.showOrHide = 'Ocultar';

		var width = 500,
		height = 900;

		var mapa = d3.select("#mapa").append("svg").attr("width", width).attr("height", height);
		var projection = d3.geo.mercator().scale(135000).translate([width / 2, height / 2]).center([-74.11991,4.649404]);
		var path = d3.geo.path().projection(projection);
		var div = d3.select("#mapa").append("div") .attr("class", "tooltip").style("opacity", 0);

		d3.json("scripts/controllers/unidades.json", function(error, bogota) {
			
			var unidades = topojson.feature(bogota, bogota.objects.zonasurbanas),
			vecinos = topojson.neighbors(bogota.objects.zonasurbanas.geometries);

			unidades.features.forEach(function(unidad, i) {
				unidad.centroid = path.centroid(unidad);
    			if (unidad.centroid.some(isNaN)) unidad.centroid = null; // off the map
    				unidad.neighbors = unidad.centroid ? vecinos[i].filter(function(j) { return j < i && unidades.features[j].centroid; }).map(function(j) { return unidades.features[j]; }) : [];
    		});

			mapa.selectAll(".unidad").data(unidades.features).enter().append("path").attr("class", function(d){return "unidad"}).attr("d", path)
			.on("mouseover", function(d) { 
				div.html("<b>"+d.properties.name+"</b>");
				div.transition().duration(200).style("opacity", .9);
				div.style("left", (d.centroid[0]) + "px").style("top", (d.centroid[1] - 18) + "px");
            })          
			.on("mouseout", function(d) {   
				div.transition().duration(500).style("opacity", 0); 
			});

			var centroids = [[6.95682,-71.87482],[11.242653,-74.208859],[4.642282,-74.078213],[4.702198,-74.041765],[4.645837,-74.055011],[4.630736,-74.092951],[4.59783,-74.134611],[4.652061,-74.10878],[4.673143,-74.057751],[10.980188,-74.830337],[4.63398,-74.068849],[10.40449,-75.554679],[10.404012,-75.554265],[10.404411,-75.554737],[10.404202,-75.554401],[4.630014,-74.065861],[4.693525,-74.034019],[10.404525,-75.554656],[4.61225,-74.15119],[4.679961,-74.039282],[6.190116,-75.504385],[10.404295,-75.554413],[10.404284,-75.554408],[4.60987,-74.082],[4.624499,-74.077858],[4.643508,-74.085643],[4.616864,-74.089647],[4.585217,-74.103886],[4.72892,-74.072541],[4.67742,-74.113816],[4.728966,-74.072545],[4.680167,-74.043071],[4.680167,-74.043071],[4.680167,-74.043071],[4.543377,-74.120653],[4.686228,-74.061363],[4.685764,-74.035898],[4.653231,-74.056949],[4.654926,-74.053791],[4.655442,-74.05517],[4.668185,-74.04517],[4.708948,-74.034321],[4.717615,-74.032802],[4.627381,-74.076096],[4.650944,-74.06163],[4.648645,-74.061049],[4.659043,-74.05445],[4.747987,-74.052139],[4.635508,-74.076986],[11.013841,-74.806654],[11.010263,-74.795839],[4.728926,-74.072526],[4.593062,-74.200022],[4.625549,-74.077493],[4.717621,-74.034545],[4.680166,-74.04304],[4.680166,-74.04304],[4.680166,-74.04304],[4.543279,-74.120627],[4.680104,-74.042988],[4.543294,-74.120623],[4.734492,-74.04911],[4.633842,-74.074581],[11.242706,-74.208861],[4.631886,-74.129024],[4.650144,-74.048637],[4.743449,-74.037121],[10.981033,-74.832112],[4.677666,-74.085041],[4.67767,-74.085004],[4.677668,-74.084911],[4.679302,-74.043043],[4.611738,-74.146831],[4.717974,-74.047839],[8.760085,-75.871353],[4.630943,-74.081734],[4.630993,-74.081794],[4.679526,-74.039555],[4.678842,-74.04443],[4.613561,-74.0702],[4.553584,-74.110602],[4.671065,-74.055458],[4.62666,-74.070742],[4.626657,-74.070737],[4.662623,-74.047118],[4.64049,-74.060529],[4.64049,-74.060529],[4.585798,-74.112157],[4.631029,-74.062211],[4.631889,-74.12903],[4.54329,-74.12063],[4.554283,-74.154055],[4.543343,-74.120627],[4.681069,-74.051823],[12.58027,-81.698149],[4.743452,-74.03727],[4.593992,-74.116918],[4.715928,-74.039495],[4.736765,-74.084732],[4.593965,-74.117056],[4.54331,-74.120608],[4.703494,-74.041512],[4.543328,-74.120607],[4.543347,-74.120618],[4.543345,-74.120587],[12.580171,-81.698109],[12.580212,-81.69817],[12.580259,-81.698154],[4.687061,-74.098082],[6.247512,-75.563927],[6.247461,-75.56398],[4.704882,-74.025394],[6.328474,-75.55775],[4.66267,-74.070885],[4.741165,-74.126471],[4.691852,-74.033456],[4.689353,-74.034899],[4.687774,-74.035203],[12.580218,-81.698137],[4.620594,-74.066495],[4.631026,-74.081844],[4.543565,-74.120654],[4.631309,-74.077582],[4.631106,-74.077491],[4.623524,-74.072556],[4.623513,-74.072547],[4.630735,-74.06216],[4.679493,-74.039138],[4.655042,-74.067329],[4.59405,-74.116952],[4.588206,-74.065602],[4.500291,-74.109074],[4.65098,-74.062041],[4.543569,-74.120652],[6.207176,-75.600862],[4.661286,-74.114937],[4.672062,-74.054038],[4.543615,-74.12068],[4.686238,-74.061233],[4.737145,-74.105857],[4.737129,-74.105871],[4.746351,-74.044485],[6.236449,-75.551728],[4.691781,-74.030547],[10.473579,-73.263027],[10.473606,-73.263055],[4.66113,-74.114995],[10.47361,-73.263086],[10.473634,-73.263113],[4.630113,-74.095798],[4.630243,-74.095784],[4.630254,-74.095765],[4.543584,-74.120628],[4.543577,-74.120639],[4.543555,-74.12064],[4.543551,-74.120641],[4.543552,-74.120652],[4.54352,-74.120648],[4.543543,-74.120648],[4.543549,-74.120648],[4.543558,-74.120665],[4.543531,-74.120666],[4.543554,-74.120655],[4.543538,-74.120655],[4.543543,-74.120651],[4.543534,-74.120638],[4.627099,-74.081814],[4.543553,-74.120665],[4.543523,-74.120654],[4.728912,-74.072585],[4.625959,-74.090603],[4.763651,-74.049954],[4.543578,-74.120667],[4.643882,-74.078877],[4.728247,-74.101362],[4.622829,-74.146558],[4.727295,-74.038441],[4.642969,-74.069349],[4.6123,-74.101915],[4.606672,-74.066272],[6.236714,-75.551405],[4.588391,-74.065759],[4.543687,-74.120606],[12.580359,-81.698084],[3.400744,-76.546861],[4.69576,-74.053079],[4.609026,-74.120133],[5.597812,-75.816456],[4.626992,-74.090946],[3.573662,-76.480439],[4.650861,-74.160938],[4.650851,-74.160909],[4.650862,-74.160941],[4.650847,-74.160952],[4.553477,-74.11861],[4.332619,-74.360569],[10.980161,-74.830377],[4.661717,-74.089943],[4.743409,-74.037249],[4.743355,-74.037288],[4.652709,-74.080379],[4.675191,-74.06437],[4.675191,-74.06437],[4.675182,-74.066358],[4.728932,-74.072515],[4.728851,-74.072643],[4.71816,-74.102845],[4.543511,-74.120653],[4.543513,-74.120631],[4.543535,-74.120654],[4.543522,-74.120644],[6.198482,-75.566293],[6.198439,-75.566241],[6.198447,-75.56629],[4.624515,-74.066142],[4.768202,-74.046575],[4.694707,-74.065349],[4.543579,-74.120667],[4.543618,-74.12064],[4.676778,-74.054038],[4.332676,-74.360642],[4.656536,-74.111447],[4.543505,-74.120644],[4.640945,-74.069947],[4.648604,-74.055572],[3.885746,-77.074083],[8.752089,-75.887566],[5.636542,-73.526135],[5.636544,-73.526155],[4.6564,-74.1178],[4.6564,-74.1178],[4.543502,-74.120653],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[10.404563,-75.554843],[4.648564,-74.055567],[4.6564,-74.1178],[3.573687,-76.480407],[3.573663,-76.480333],[4.624848,-74.078074],[4.543473,-74.12066],[4.543504,-74.120664],[4.673811,-74.097855],[4.673812,-74.097839],[4.598515,-74.072402],[4.599576,-74.072765],[10.42975,-75.534433],[7.114372,-73.122334],[4.59957,-74.072784],[4.720409,-74.028909],[4.599554,-74.072797],[4.543508,-74.120648],[10.404423,-75.554819],[7.127811,-73.181633],[5.828789,-73.031052],[5.828739,-73.030966],[5.828726,-73.031002],[4.667359,-74.053505],[5.636506,-73.526143],[10.923888,-74.798346],[4.332675,-74.360684],[4.565942,-74.127113],[10.496,-66.8983],[4.63187,-74.090586],[4.63256,-74.090828],[4.6509,-74.16089],[4.650921,-74.160916],[4.650868,-74.160872],[12.580256,-81.698084],[12.580227,-81.698124],[4.74345,-74.037179],[4.543511,-74.120644],[4.543476,-74.120613],[7.116714,-73.118441],[11.523521,-72.920182],[4.60196,-74.152499],[4.648588,-74.05556],[4.717628,-74.030843],[4.717628,-74.030843],[6.347635,-75.504273],[4.543487,-74.120638],[4.543483,-74.120642],[4.599256,-74.124685],[6.244327,-75.596913],[4.610189,-74.148584],[10.473314,-73.262672],[4.54348,-74.120636],[10.473673,-73.263215],[10.473482,-73.26293],[4.697442,-74.125568],[6.236697,-75.551471],[4.657702,-74.102525],[4.607293,-74.070129],[4.630165,-74.156732],[4.543533,-74.120651],[4.543513,-74.120644],[4.543525,-74.120644],[4.543505,-74.120649],[4.649031,-74.07595],[4.543508,-74.120648],[4.543549,-74.120656],[4.543555,-74.120652],[4.768124,-74.04667],[4.588204,-74.065599],[4.543536,-74.120664],[5.82876,-73.031098],[4.543587,-74.120671],[4.767756,-74.045619],[4.767764,-74.045629],[4.543523,-74.12064],[10.404074,-75.554386],[4.543488,-74.120645],[4.69194,-74.05344],[9.31805,-75.29328],[18.517198,-70.030805],[18.517198,-70.030806],[4.768175,-74.04666],[4.589292,-74.120302],[4.676544,-74.048527],[4.725087,-74.062713],[4.543469,-74.120635],[10.473357,-73.263298],[4.650622,-74.064455],[10.404485,-75.554822],[10.40446,-75.55467],[10.404438,-75.554674],[4.543601,-74.120623],[4.543588,-74.120654],[10.428333,-66.889437],[10.428339,-66.889455],[10.404451,-75.554855],[6.26219,-75.576968],[4.72878,-74.072531],[4.728786,-74.072533],[4.54344,-74.120658],[4.713456,-74.032855],[4.604025,-74.066298],[4.604036,-74.0663],[4.636828,-74.078379],[4.61667,-74.1833],[4.543484,-74.120665],[4.694572,-74.033962],[4.768249,-74.046516],[4.704166,-74.040906],[4.681596,-74.110359],[4.681608,-74.110303],[3.449313,-76.542813],[4.543421,-74.120662],[4.54353,-74.120665],[4.690346,-74.034287],[4.768188,-74.046516],[4.606271,-74.069482],[4.606271,-74.069482],[4.606537,-74.067485],[4.672358,-74.054038],[4.543529,-74.120673],[4.6564,-74.1178],[4.6564,-74.1178],[4.634413,-74.094657],[4.634418,-74.094657],[4.634423,-74.09467],[4.634421,-74.094673],[4.650422,-74.05535],[4.623919,-74.081909],[4.659367,-74.061646],[4.607194,-74.07027],[3.430626,-76.550947],[3.430654,-76.550931],[3.430781,-76.550932],[4.594041,-74.116944],[4.594044,-74.116958],[7.116622,-73.120491],[4.979377,-74.42715],[4.54364,-74.120635],[4.543532,-74.120639],[4.543547,-74.120652],[4.543486,-74.120632],[4.72892,-74.072526],[7.082108,-73.130977],[8.244005,-73.355509],[4.651607,-74.057425],[4.637718,-74.063416],[4.620536,-74.069678],[4.681543,-74.11022],[11.012122,-74.794534],[11.012122,-74.794534],[4.66238,-74.04932],[4.681554,-74.110187],[4.681592,-74.110191],[4.621304,-74.0847],[4.543518,-74.120641],[4.543492,-74.120645],[10.404491,-75.554517],[4.728839,-74.072585],[4.658451,-74.117207],[4.702793,-74.028894],[4.768234,-74.046525],[4.691971,-74.074898],[10.47332,-73.262676],[10.473423,-73.262894],[10.473768,-73.263362],[4.609998,-74.162426],[4.651908,-74.054722],[4.735788,-74.083941],[6.207181,-75.600851],[9.309925,-75.377928],[11.012122,-74.794534],[10.428344,-66.889418],[11.01027,-74.795698],[6.232976,-75.595606],[4.658449,-74.11716],[4.543549,-74.12067],[4.692695,-74.044767],[4.692611,-74.044759],[7.8176,-72.50946],[4.652884,-74.161045],[4.768196,-74.046574],[4.768196,-74.046574],[5.82972,-73.035402],[4.543561,-74.120651],[4.6564,-74.1178],[4.661557,-74.072425],[8.981977,-79.523857],[8.982,-79.523991],[8.98202,-79.5239],[8.982043,-79.52398],[8.982016,-79.523931],[3.573709,-76.480488],[8.982016,-79.523931],[8.982015,-79.523894],[8.982015,-79.523894],[8.982004,-79.52388],[8.982027,-79.524007],[4.6564,-74.1178],[4.6564,-74.1178],[4.66966,-74.054321],[4.652907,-74.062112],[4.571222,-74.114115],[12.580211,-81.698022],[4.543505,-74.120671],[11.00951,-74.806612],[11.00951,-74.806612],[11.00951,-74.806612],[11.00951,-74.806612],[11.00951,-74.806612],[4.6564,-74.1178],[4.593945,-74.116832],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.644998,-74.089097],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.543514,-74.120661],[4.6564,-74.1178],[4.678473,-74.083665],[4.68024,-74.044615],[4.6564,-74.1178],[7.059432,-73.862823],[4.6564,-74.1178],[4.6564,-74.1178],[4.587781,-74.097287],[4.6564,-74.1178],[4.6564,-74.1178],[4.594028,-74.116962],[4.731229,-74.050561],[4.649442,-74.06289],[3.52414,-76.295656],[4.73138,-74.055324],[8.244048,-73.355729],[4.594053,-74.116968],[4.6339,-74.142105],[4.604025,-74.066286],[3.4386,-76.517],[4.6564,-74.1178],[4.685852,-74.080583],[4.543498,-74.120648],[4.543515,-74.120636],[3.4386,-76.517],[4.6564,-74.1178],[4.748605,-74.099927],[4.65872,-74.06921],[3.4386,-76.517],[4.6564,-74.1178],[4.594014,-74.116951],[4.59246,-74.100535],[4.59243,-74.100512],[4.592394,-74.10044],[4.593922,-74.117087],[4.594077,-74.116943],[4.657538,-74.078037],[4.628865,-74.132398],[4.746154,-74.157686],[4.594039,-74.116903],[4.591246,-74.160391],[4.594043,-74.116963],[4.654866,-74.065856],[7.116546,-73.12032],[8.744493,-75.882052],[4.619844,-74.155114],[8.746481,-75.88485],[4.6,-74.0833],[10.404485,-75.554691],[10.404553,-75.554864],[10.404309,-75.554477],[4.689912,-74.098292],[4.675376,-74.076669],[4.720505,-74.119422],[4.697747,-74.090588],[4.700487,-74.04319],[4.628875,-74.132417],[10.332321,-75.425555],[8.746479,-75.884867],[4.543553,-74.120632],[4.593997,-74.116931],[4.543562,-74.120636],[4.543554,-74.120645],[4.59403,-74.116955],[4.5436,-74.120639],[10.97965,-74.828836],[4.669263,-74.10829],[4.628701,-74.066596],[4.628701,-74.066596],[4.628701,-74.066596],[4.731379,-74.055038],[10.955259,-74.795403],[4.633928,-74.14211],[4.543535,-74.120658],[4.54356,-74.120652],[8.752184,-75.88754],[4.543514,-74.12066],[4.543532,-74.120644],[8.752184,-75.88754],[4.671218,-74.077359],[18.449144,-69.925655],[5.530886,-73.361605],[4.54348,-74.120666],[10.981706,-74.829003],[4.543479,-74.120652],[4.543475,-74.120672],[4.543489,-74.120665],[4.543558,-74.120669],[4.543512,-74.120658],[4.543501,-74.120666],[4.634579,-74.142215],[4.599257,-74.12475],[4.628882,-74.132468],[5.636317,-73.526164],[10.404637,-75.554937],[4.663068,-74.063654],[10.404612,-75.554689],[4.543531,-74.120672],[4.543483,-74.120655],[11.011604,-74.79445],[4.768135,-74.046681],[4.571239,-74.114184],[4.73142,-74.05531],[5.636735,-73.526235],[7.087813,-73.17608],[4.732814,-74.049414],[4.594067,-74.116965],[4.736864,-74.04883],[4.736864,-74.04883],[4.73454,-74.049055],[4.73454,-74.049055],[4.73454,-74.049055],[4.747617,-74.046998],[4.739313,-74.048398],[4.626843,-74.065299],[5.636475,-73.526035],[4.687685,-74.03985],[4.660816,-74.060267],[4.660825,-74.060235],[4.660804,-74.060285],[4.66081,-74.060288],[4.66083,-74.060272],[4.651952,-74.054755],[4.673757,-74.09793],[4.570107,-74.143775],[4.570301,-74.145365],[4.570183,-74.143867],[4.570031,-74.143684],[4.571195,-74.114097],[4.768385,-74.046109],[4.594053,-74.116965],[4.594035,-74.116968],[9.242697,-75.813508],[8.752067,-75.887561],[8.752067,-75.887561],[4.543532,-74.120661],[4.630469,-74.060947],[4.543501,-74.120678],[4.571236,-74.114157],[4.632779,-74.087932],[4.543514,-74.120654],[4.543526,-74.12065],[4.594035,-74.116832],[4.543617,-74.120642],[4.543624,-74.120655],[4.543628,-74.120643],[4.543451,-74.120674],[4.65693,-74.133164],[4.543463,-74.120669],[4.543503,-74.120667],[4.543484,-74.120646],[4.641255,-74.156064],[4.543488,-74.120668],[4.543537,-74.120646],[4.54355,-74.120635],[4.543592,-74.120637],[4.543591,-74.120641],[10.404549,-75.554783],[10.404725,-75.555101],[10.404705,-75.555053],[10.404635,-75.554938],[10.404638,-75.554907],[10.404597,-75.554974],[4.67899,-74.052441],[10.40456,-75.554867],[11.010268,-74.795575],[10.404576,-75.554665],[10.404573,-75.554923],[10.404422,-75.554944],[10.404527,-75.55486],[10.404482,-75.554872],[10.40458,-75.554943],[10.404575,-75.554867],[4.595269,-74.122916],[4.595295,-74.122912],[4.595243,-74.122953],[8.75213,-75.887549],[4.757,-74.032793],[4.593434,-74.115141],[4.594066,-74.116967],[4.543568,-74.120645],[4.543547,-74.120667],[4.543526,-74.120665],[4.543555,-74.120666],[4.543568,-74.120669],[4.543556,-74.120643],[4.543527,-74.120637],[4.70395,-74.049977],[4.543549,-74.120657],[4.543535,-74.120663],[4.70131,-74.044741],[4.643616,-74.107531],[4.659289,-74.068524],[4.659284,-74.06854],[4.710714,-74.11178],[4.710714,-74.11178],[4.627536,-74.135059],[4.636978,-74.055406],[4.662205,-74.05067],[4.694712,-74.086503],[10.981088,-74.832096],[10.981069,-74.832104],[4.694712,-74.086503],[4.677053,-74.078431],[4.593858,-74.116697],[10.980835,-74.832242],[10.980854,-74.832252],[4.567223,-74.084812],[4.591367,-74.160461],[4.554397,-74.090626],[4.399,-74.384913],[4.768198,-74.046501],[4.594038,-74.116971],[4.674146,-74.037734],[4.701595,-74.044643],[4.58078,-74.13791],[4.66467,-74.05819],[4.648611,-74.055623],[4.73146,-74.055219],[4.543489,-74.120648],[4.56031,-74.13811],[10.404546,-75.554639],[4.670241,-74.052895],[4.652613,-74.102456],[4.587562,-74.161161],[4.626221,-74.135567],[4.543516,-74.120628],[8.752084,-75.88755],[8.752189,-75.887541],[8.752136,-75.887545],[4.543564,-74.120653],[4.701657,-74.044559],[10.404566,-75.5546],[4.54351,-74.120643],[4.543513,-74.120623],[4.621311,-74.166349],[4.666632,-74.054418],[4.630424,-74.06094],[4.690089,-74.045037],[4.628865,-74.068821],[4.625372,-74.063855],[6.247469,-75.563956],[4.651026,-74.160913],[4.571236,-74.114165],[4.543528,-74.120652],[4.571247,-74.114168],[4.571235,-74.114152],[4.543602,-74.120666],[4.54359,-74.120652],[4.636526,-74.072462],[4.658441,-74.117178],[4.768218,-74.046611],[4.768233,-74.046577],[4.658432,-74.117144],[4.668502,-74.063271],[4.728807,-74.072601],[11.23349,-74.212725],[4.60987,-74.082],[4.6564,-74.1178],[4.6564,-74.1178],[4.543525,-74.120636],[4.6564,-74.1178],[4.6564,-74.1178],[4.692847,-74.114494],[4.60987,-74.082],[4.645724,-74.058004],[4.6564,-74.1178],[4.6564,-74.1178],[4.54349,-74.120631],[4.543595,-74.120623],[4.768615,-74.046536],[4.54359,-74.120655],[4.543603,-74.12065],[4.543542,-74.120651],[4.6564,-74.1178],[4.543578,-74.120626],[4.6564,-74.1178],[4.6564,-74.1178],[4.624238,-74.065373],[4.6564,-74.1178],[4.54354,-74.12064],[11.01097,-74.795267],[4.543525,-74.12064],[4.628913,-74.178439],[4.628917,-74.17839],[4.6564,-74.1178],[4.6564,-74.1178],[4.655324,-74.05751],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.570448,-74.158902],[8.752135,-75.887568],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[11.01097,-74.795267],[4.698609,-74.07671],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.543551,-74.120641],[4.624509,-74.066065],[4.504604,-74.115042],[3.4386,-76.517],[4.664569,-74.04756],[6.2365,-75.5903],[4.6564,-74.1178],[4.675117,-73.988515],[5.82885,-73.031212],[4.686986,-74.132796],[4.67741,-74.113794],[4.658467,-74.117211],[4.669154,-74.05462],[4.761534,-74.041411],[4.727739,-74.030626],[4.543489,-74.120665],[4.54352,-74.120683],[4.543537,-74.120642],[4.702831,-74.228529],[4.600006,-74.132641],[4.511154,-74.112383],[4.523484,-74.120795],[4.660236,-74.129125],[4.671908,-74.130111],[10.980995,-74.832152],[4.575647,-74.154644],[13.705568,-89.215035],[4.575635,-74.154627],[4.6564,-74.1178],[8.752142,-75.887576],[8.752142,-75.887576],[4.715171,-74.087835],[4.6,-74.0833],[4.134039,-73.624891],[4.133899,-73.624774],[4.660281,-74.129077],[4.660319,-74.129082],[4.660239,-74.129078],[4.57307,-74.149835],[4.57118,-74.114094],[8.746376,-75.885002],[4.667175,-74.060508],[4.69409,-74.047078],[5.829777,-73.035387],[4.703003,-74.228838],[4.702992,-74.2287],[4.697014,-74.08348],[4.68524,-74.062833],[4.649646,-74.063661],[4.647151,-74.101811],[4.768736,-74.046648],[4.768736,-74.046648],[4.652793,-74.056397],[4.675371,-74.076736],[11.010266,-74.795494],[11.010266,-74.795494],[11.010266,-74.795494],[11.010266,-74.795494],[11.010266,-74.795494],[11.010266,-74.795494],[4.67212,-74.129783],[4.704023,-74.029744],[4.661709,-74.054855],[4.632369,-74.078389],[11.010266,-74.795494],[11.010266,-74.795494],[10.981022,-74.832149],[11.010266,-74.795494],[11.010266,-74.795494],[10.980981,-74.832141],[10.980914,-74.832186],[10.980922,-74.832208],[10.980894,-74.832198],[10.980906,-74.8322],[10.980876,-74.832199],[10.980913,-74.832207],[10.980907,-74.832203],[10.980927,-74.832203],[10.980901,-74.83221],[10.980903,-74.832199],[10.980927,-74.832189],[10.980932,-74.832188],[10.980887,-74.832204],[10.980884,-74.832212],[11.242012,-74.191505],[4.672026,-74.13031],[10.380798,-75.504915],[11.012121,-74.79449],[11.012121,-74.79449],[4.668181,-74.129141],[4.447246,-75.175048],[10.981072,-74.832086],[4.707291,-74.232677],[4.543676,-74.120687],[4.627909,-74.203061],[4.647598,-74.101012],[5.938133,-73.61425],[5.938126,-73.61425],[4.724682,-74.062958],[4.69985,-74.081693],[4.706932,-74.076732],[4.628471,-74.170971],[4.731379,-74.05529],[4.6564,-74.1178],[4.6564,-74.1178],[4.6564,-74.1178],[4.672474,-74.124001],[4.543646,-74.120644],[4.571241,-74.114174],[4.571219,-74.114153],[4.543668,-74.120654],[4.543635,-74.120658],[4.698647,-74.140639],[4.587616,-74.1611],[4.543641,-74.120654],[4.543646,-74.120662],[4.543657,-74.120664],[4.543669,-74.120657],[4.54362,-74.120651],[4.543549,-74.120629],[4.63126,-74.132271],[4.543624,-74.120623],[11.231491,-74.176218],[4.638792,-74.154179],[4.637691,-74.195633],[4.613754,-74.120128],[4.613815,-74.120066],[4.543679,-74.120653],[4.543636,-74.120634],[4.768143,-74.04668],[4.543665,-74.12066],[4.6,-74.0833],[4.543664,-74.120668],[4.624768,-74.100878],[8.751938,-75.886379],[8.751938,-75.886379],[4.629914,-74.064785],[4.543652,-74.120683],[4.690986,-74.083229],[4.634167,-74.066944],[4.62852,-74.150782],[4.627512,-74.133883],[4.635614,-74.068836],[10.16554,-66.8971],[4.543669,-74.120673],[4.57121,-74.114156],[4.6,-74.0833],[4.578332,-74.086074],[4.721656,-74.034299],[4.605219,-74.0556],[4.543627,-74.120676],[4.543652,-74.120684],[10.404495,-75.554807],[10.404483,-75.554833],[8.752095,-75.886961],[5.060644,-75.494063],[4.594052,-74.116975],[8.752095,-75.886961],[4.54368,-74.120685],[4.6,-74.0833],[4.66918,-74.053528],[4.66919,-74.0536],[4.63474,-74.143292],[4.73148,-74.055149],[4.666912,-74.066352],[4.841971,-74.032707],[4.543654,-74.120661],[4.543679,-74.120673],[4.543662,-74.120671],[4.658447,-74.117171],[4.543642,-74.120653],[4.651791,-74.066354],[4.54368,-74.120684],[4.620815,-74.087804],[4.618921,-74.068074],[4.6312161,-74.132246],[4.69626411,-74.0299419],[4.69733,-74.0901489],[4.6564,-74.1178],[4.6564,-74.1178],[4.58576,-74.14160625],[7.0640083,-73.8571266],[4.6333395,-74.1302706],[4.6753555,-74.0767323],[4.6284908,-74.1709841],[10.9810286,-74.8320986],[10.4355145,-75.5368568],[2.4562685,-76.5986444],[6.3443006,-75.5400713],[4.59406455,-74.11681867],[10.9809015,-74.8322012],[4.6903206,-74.1009998],[4.6564,-74.1178],[3.4305328,-76.5509318],[4.6891152,-74.0961018],[6.23690407,-75.5517634],[4.5436481,-74.1206749],[4.5436484,-74.120669],[4.5970958,-74.1050596],[4.7232776,-74.0697798],[4.7250925,-74.0626477],[4.65510049,-74.06711585],[4.7068427,-74.076516],[4.6626824,-74.0552759],[4.5436251,-74.1206389],[4.5436543,-74.1206834],[4.5436616,-74.120674],[4.5992589,-74.12468403],[4.6891212,-74.0961084],[10.4363569,-75.5355459],[4.72165384,-74.03383635],[4.645393,-74.0880946],[10.4363627,-75.5355472],[4.5758169,-74.1675609],[4.72175427,-74.03408027],[4.575787,-74.1675876],[4.6891558,-74.0960679],[4.689141,-74.0961115],[4.5757935,-74.1675934],[4.6891251,-74.0961318],[4.7219327,-74.03378145],[4.72181646,-74.03408727],[4.6564,-74.1178],[4.6564,-74.1178],[4.6284118,-74.1709798],[4.5436621,-74.1206657],[4.6452397,-74.0883405],[4.6175235,-74.2115858],[4.6100116,-74.1624277],[4.6175889,-74.2117098],[4.6175064,-74.2115541],[4.705692,-74.0705385],[3.4498258,-76.5419188],[4.72164944,-74.03392185],[4.616962,-74.1694853],[6.2576685,-75.6132873],[2.9486466,-75.300994],[9.3099139,-75.3779828],[4.5436708,-74.1206774],[4.543662,-74.1206542],[4.6449554,-74.0713524],[4.5436693,-74.1206781],[4.6480864,-74.0629603],[4.618945,-74.0682716],[4.618945,-74.0682716],[4.618945,-74.0682716],[4.618945,-74.0682716],[4.618945,-74.0682716],[4.62277745,-74.09663078],[4.62270972,-74.09656363],[4.7040049,-74.0544269],[4.7242359,-74.0509199],[4.6028854,-74.0615048],[4.6469881,-74.0674595],[4.7570034,-74.0327138],[4.757017,-74.0327351],[4.5436852,-74.1206554],[4.5436414,-74.1206491],[4.5436606,-74.1206608],[4.691727,-74.0306266],[4.6374033,-74.0652277],[4.68143704,-74.06501563],[4.58615,-74.0937197],[4.5436152,-74.1206508],[4.61501299,-74.07052761],[4.72163452,-74.0339861],[4.72892633,-74.07254012],[4.64650605,-74.05953123],[4.6584771,-74.1171978],[4.6584901,-74.1172324],[4.7623016,-74.0433134],[4.5436448,-74.1206698],[4.6759432,-74.0475618],[4.5436539,-74.1206595],[4.5436579,-74.1206585],[4.5436582,-74.12066],[4.5436687,-74.1206555],[4.543664,-74.1206648],[4.6592542,-74.0685293],[4.6122873,-74.1512231],[4.5827846,-74.097471],[10.404537,-75.5546589],[10.404335,-75.5545717],[10.4046682,-75.5547413],[10.4044612,-75.5546513],[4.5436863,-74.120668],[4.5436597,-74.1206641],[4.5436541,-74.1206743],[4.5436579,-74.1206647],[4.5436859,-74.1206787],[4.5868562,-74.1934967],[4.7001144,-74.0312669],[4.68984855,-74.07082021],[4.5975083,-74.1057077],[4.7685785,-74.0464835],[4.6917308,-74.0306219],[4.63396387,-74.1420523],[4.6592626,-74.0685373],[4.5940585,-74.11677369],[4.6564,-74.1178],[4.6283658,-74.1709482],[4.54368,-74.1206841],[4.6284284,-74.1709888],[4.61565474,-74.11541557],[4.5436812,-74.1206767],[4.59963449,-74.09527612],[4.5975579,-74.0742625],[4.5975579,-74.0742625],[4.5982124,-74.0743423],[4.5982124,-74.0743423],[4.0905838,-73.6664926],[4.5982124,-74.0743423],[4.6024335,-74.0786676],[4.6480822,-74.062971],[4.7957609,-74.0498671],[11.0131605,-74.8106452],[4.7685466,-74.0464333],[4.6710576,-74.0553922],[4.6710576,-74.0553922],[4.6125893,-74.0689493],[4.6125688,-74.068917],[2.4863742,-76.5798255],[4.7685815,-74.0464811],[4.5436418,-74.1206667],[4.6700159,-74.1167919],[4.6719641,-74.1302113],[4.543578,-74.1206761],[4.6720118,-74.130328],[4.6720122,-74.1303157],[4.6720122,-74.1303157],[4.5436729,-74.1206625],[4.5436621,-74.1206675],[4.5971876,-74.1049551],[4.7137596,-74.03137907],[4.5940384,-74.1169598],[4.59392739,-74.11695666],[11.0078529,-74.7936046],[4.675763,-74.0477152],[5.63661187,-73.52614758],[4.5940899,-74.1169472],[4.662235,-74.0506066],[4.66324714,-74.12437429],[4.59546208,-74.06865255],[4.5959391,-74.0684266],[4.5960046,-74.0684687],[4.6722688,-74.05423445],[4.6,-74.0833],[4.7250752,-74.0626831],[4.6311128,-74.0850979],[4.8234626,-74.0352395],[4.6719725,-74.1303469],[6.2408263,-75.5825023],[9.2909962,-73.515781],[4.6720325,-74.1304936],[4.6,-74.0833],[4.6720389,-74.1304836],[4.6720705,-74.1304761],[9.2910326,-73.5157895],[4.70189135,-74.04439585],[4.6756536,-74.0473439],[10.979306,-74.8294904],[4.6283906,-74.170959],[4.1411327,-73.6336338],[4.1410909,-73.6335481],[4.6029082,-74.0708551],[4.63898344,-74.13899384],[4.5966195,-74.0840059],[4.6918227,-74.0301651],[4.6755328,-74.0642199],[4.6365078,-74.1524788],[4.6365251,-74.1524858],[4.6311757,-74.1533596],[4.5866097,-74.1180548],[6.23673957,-75.55163767],[4.6429216,-74.1537865],[5.6318214,-73.525392],[5.0119016,-75.6324666],[4.70696111,-74.03199354],[4.632804,-74.1098817],[4.6273116,-74.0877869],[7.9124871,-72.4405336],[10.9811216,-74.8320512],[4.58468,-74.128855],[4.7172821,-74.0316259],[4.7031607,-74.2419286],[4.6320405,-74.1692167],[4.6320715,-74.1691304],[4.6658208,-74.1462108],[4.6720506,-74.1306549],[4.3449948,-74.3559399],[4.6721112,-74.130546],[10.20881327,-67.99077128],[4.61682318,-74.12679601],[4.57425627,-74.12992263],[6.2459448,-75.6094437],[6.2448718,-75.6093842],[4.6564,-74.1178],[4.6159674,-74.1617838],[4.5940128,-74.1169459],[4.6743005,-74.0649141],[4.7282139,-74.0642271],[4.67235823,-74.0540375],[4.7380565,-74.0868053],[4.5436512,-74.1206709],[4.5436937,-74.1206626],[4.543658,-74.1206814],[4.5991284,-74.0763664],[6.26021044,-75.61424789],[4.6427658,-74.0610993],[4.594014,-74.11696],[4.5940421,-74.116966],[4.5436357,-74.1206558],[4.5940553,-74.1169756],[4.5435919,-74.1206459],[4.5940341,-74.1169485],[4.5436209,-74.1206463],[4.5436513,-74.1206647],[4.5436651,-74.120669],[4.5436017,-74.1206581],[4.5094566,-74.11323],[4.6338279,-74.1420633],[4.7305811,-74.0675928],[4.5094566,-74.11323],[4.671998,-74.1304219],[4.5436704,-74.1206761],[4.5436512,-74.120661],[4.5436183,-74.120656],[4.6502988,-74.1557828],[4.5436746,-74.1206858],[4.5436628,-74.120665],[4.6503324,-74.1557191],[4.6503159,-74.1557359],[4.6503164,-74.1557613],[4.6338445,-74.1420564],[10.4363233,-75.5355521],[10.4363431,-75.5355485],[4.6564,-74.1178],[4.7049329,-74.0683789],[4.6284062,-74.1709639],[4.6608149,-74.1286745],[4.6608149,-74.1286745],[4.6343432,-74.1734417],[4.6343432,-74.1734417],[4.6608149,-74.1286745],[4.6611034,-74.1264389],[4.6611034,-74.1264389],[4.6611034,-74.1264389],[4.6611034,-74.1264389],[10.8894576,-72.8567273],[11.5548542,-72.9013034],[11.5548681,-72.9012594],[4.6917665,-74.0306754],[11.5549293,-72.9010568],[4.5436464,-74.1206732],[4.5436432,-74.1206683],[4.5436365,-74.1206643],[4.5436388,-74.12066],[4.5436505,-74.1206609],[4.543652,-74.1206536],[10.4045376,-75.5546788],[4.6901054,-74.0450912],[6.55419,-73.12779],[6.2882731,-75.4365816],[4.7307299,-74.0675452],[4.64655388,-74.05954616],[4.5959518,-74.0763906],[4.5958932,-74.0764405],[4.5959151,-74.0764254],[4.5959211,-74.0764111],[4.5959668,-74.0763687],[4.5436679,-74.120675],[4.5436713,-74.1206606],[4.5436393,-74.1206673],[4.5436832,-74.1206878],[4.543659,-74.1206766],[4.5436494,-74.1206587],[4.5436485,-74.120645],[4.5436489,-74.1206612],[4.5436808,-74.1206538],[4.5436622,-74.1206453],[4.5579487,-74.1101434],[4.6316061,-74.0637776],[4.5436727,-74.1206751],[4.6586786,-74.0994059],[4.707839,-74.1210597],[4.4441654,-75.2230787],[4.5436773,-74.1206687],[4.61391403,-74.06601406],[9.2910326,-73.5157686],[4.5940121,-74.1169631],[4.5436798,-74.1206613],[4.9560101,-73.9369551],[4.5436728,-74.1206589],[8.7520032,-75.8871458],[4.69577489,-74.14008213],[4.5436927,-74.1206594],[4.6564,-74.1178],[8.248378,-73.3594021],[4.6836532,-74.0484238],[4.7425558,-74.0844517],[4.649185,-74.062371],[4.6112574,-74.1438957],[4.5436827,-74.120671],[4.5436419,-74.1206681],[4.6564,-74.1178],[4.5435591,-74.1206477],[4.5436422,-74.120672],[4.592151,-74.111095],[10.4084984,-75.5510693],[3.52987739,-76.28814427],[4.5436343,-74.1206652],[4.5436395,-74.1206631],[4.5436637,-74.120661],[4.5436624,-74.1206683],[4.5436543,-74.1206638],[4.5436725,-74.1206764],[4.7068546,-74.0766089],[4.7068333,-74.0766031],[10.4362571,-75.5355566],[6.23672262,-75.55163308],[4.599562,-74.1266246],[4.73146148,-74.05536237],[4.5940468,-74.1169204],[4.59924323,-74.12467246],[4.59936351,-74.12481981],[4.5436452,-74.1206735],[4.5862198,-74.1563658],[4.5940479,-74.1169459],[4.594059,-74.1169156],[4.5436614,-74.1206896],[4.6496932,-74.0750389],[4.69031701,-74.0514144],[4.5939303,-74.1169852],[4.6501601,-74.074946],[4.5436564,-74.1206732],[4.5940119,-74.116935],[4.6365626,-74.4523056],[4.67235823,-74.0540375],[4.543682,-74.1206828],[4.7304144,-74.0676886],[4.5940242,-74.1169604],[4.5436742,-74.1206819],[4.6335884,-74.0693407],[4.7305706,-74.0676095],[4.64645115,-74.05964088],[4.5973895,-74.0649334],[4.6602911,-74.1290885],[4.6602911,-74.1290885],[4.5940392,-74.1169607],[4.7304144,-74.0676886],[4.6753614,-74.0766928],[4.6753647,-74.0767227],[4.7049376,-74.0686008],[8.7520748,-75.8871197],[4.6513009,-74.1683025],[4.7307198,-74.0675313],[4.6794304,-74.0606292],[4.6466808,-74.05948904],[4.6564,-74.1178],[4.6564,-74.1178],[5.6329714,-73.5269675],[4.6846388,-74.0583167],[4.6613221,-74.075894],[6.2474718,-75.5640098],[4.6564,-74.1178],[4.6564,-74.1178],[4.6357409,-74.1616195],[4.6289104,-74.1701985],[4.6284462,-74.1709623],[4.7297797,-74.0664805],[4.7307198,-74.0675313],[4.628476,-74.170987],[4.5436897,-74.1206782],[4.6284,-74.1709505],[4.6564,-74.1178],[4.6564,-74.1178],[4.5436657,-74.1206733],[4.6340568,-74.1740418],[6.26029191,-75.61411755],[4.5436665,-74.1206705],[10.9737768,-74.7798462],[10.9737768,-74.7798462],[4.6489187,-74.0600856],[11.5549262,-72.901049],[4.1383847,-73.6337381],[4.59585476,-74.168542],[4.6592204,-74.068511],[11.5332452,-72.9174406],[4.6679742,-74.0841295],[4.5436744,-74.1206864],[4.5436604,-74.1206747],[4.543677,-74.120668],[4.6737535,-74.0838567],[4.5436902,-74.1206673],[4.6362561,-74.1458274],[4.5436799,-74.1206733],[10.9792977,-74.8294815],[4.6902839,-74.1321179],[4.5436602,-74.1206766],[4.6930242,-74.1349755],[4.5650875,-75.6501227],[4.6,-74.0833],[4.6635053,-74.1292164],[4.641043,-74.072178],[4.6302962,-74.0665459],[10.9808725,-74.8321187],[4.5706628,-74.0972657],[4.5706388,-74.0972271],[4.6934056,-74.0334258],[4.6436329,-74.0890167],[4.6280436,-74.1722459],[10.9793095,-74.8294705],[4.67552,-74.139292],[4.6725578,-74.066188],[4.615012,-74.0841112],[4.6073674,-74.0686163],[10.9812473,-74.8292404],[10.9821277,-74.8316681],[10.9808832,-74.832167],[10.4040184,-75.5542833],[10.404476,-75.5548697],[10.404476,-75.5548697],[4.6139816,-74.0669147],[4.6140202,-74.066933],[10.4363573,-75.535547],[4.6438056,-74.088918],[4.6437886,-74.0889439],[10.4045114,-75.55488],[10.4046034,-75.5547221],[10.4046034,-75.5547221],[10.4046137,-75.5549431],[10.4046224,-75.5548611],[10.404518,-75.5546452],[10.4045061,-75.5549137],[10.4043558,-75.5546082],[4.7251088,-74.0626797],[4.6696132,-74.1418462],[4.6746722,-74.1411911],[4.6749263,-74.1416869],[4.6749263,-74.1416869],[8.248407,-73.3594406],[4.6759414,-74.0816065],[4.73139462,-74.05543296],[4.6625,-74.0672669],[4.5436587,-74.120668],[4.7081745,-74.1212225],[4.7031605,-74.2419289],[4.6338467,-74.1420544],[4.6339296,-74.173508],[10.9812513,-74.8292472],[4.5436838,-74.1206759],[10.404616,-75.5546349],[10.4045272,-75.5547091],[10.4045271,-75.5549754],[10.4042788,-75.5549903],[6.2603707,-75.61414736],[10.9824389,-74.8336368],[10.4042544,-75.5550153],[10.9808939,-74.8321241],[10.9808939,-74.8321241],[4.5880976,-74.095328],[4.5885585,-74.164213],[4.60563489,-74.11832919],[10.9809422,-74.8323065],[10.9813338,-74.8328107],[10.9809851,-74.8321348],[10.9808135,-74.832167],[11.01442592,-74.82548846],[11.01412268,-74.82560568],[10.980792,-74.8321348],[10.980792,-74.8321348],[10.980792,-74.8321348],[10.980792,-74.8321348],[10.980792,-74.8321348],[10.980792,-74.8321348],[4.6340811,-74.1421422],[10.9810202,-74.8321498],[4.6476513,-74.0811386],[4.5436745,-74.1206726],[4.7312581,-74.05540222],[3.3952915,-76.5520643],[4.5436851,-74.1206706],[4.590165,-74.1247016],[4.5436939,-74.1206652],[4.590165,-74.1247016],[4.543677,-74.1206731],[4.6564,-74.1178],[4.6564,-74.1178],[4.5437204,-74.1206739],[9.06704896,-79.38663512],[4.5595188,-74.1193121],[4.5436884,-74.1206693],[4.5594965,-74.1192894],[4.5437013,-74.1206754],[4.5436817,-74.1206655],[4.6545818,-74.0540135],[4.7556859,-74.0820288],[4.6439702,-74.0706158],[10.4045212,-75.5547363],[4.7082761,-74.1212437],[10.9809958,-74.8321884],[10.9809958,-74.8321884],[4.597403,-74.0734182],[4.5973979,-74.0734185],[4.5436667,-74.1206612],[4.5968945,-74.0764933],[4.5436745,-74.1206724],[4.602908,-74.0614448]];
			mapa.selectAll("dot").data(centroids).enter().append("circle").attr("class", "dot").attr("r", 2).attr("transform", function(d) {return "translate(" + projection([d[1],d[0]]) + ")";});
		});
	};
}